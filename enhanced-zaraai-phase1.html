<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZaraAI Companion - Intelligent Security Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a237e;
            --primary-light: #534bae;
            --primary-dark: #000051;
            --secondary: #00b0ff;
            --accent: #ff4081;
            --light: #f5f5f5;
            --dark: #212121;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --gray: #9e9e9e;
            --bg-color: #f8f9fa;
            --card-bg: white;
            --text-color: #333;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --text-color: #f5f5f5;
            --card-bg: #2d2d2d;
            --light: #3d3d3d;
            --gray: #aaaaaa;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            align-items: start;
        }

        /* Chat Container */
        .chat-container {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
            height: 80vh;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .zara-avatar {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--primary);
            border: 4px solid var(--secondary);
        }

        .chat-header h1 {
            font-size: 24px;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .chat-header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .status-indicator {
            position: absolute;
            top: 25px;
            right: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-messages {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: var(--bg-color);
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            animation: messageSlide 0.3s ease-out;
        }

        @keyframes messageSlide {
            from { transform: translateY(10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: var(--secondary);
            color: white;
        }

        .message.zara .message-avatar {
            background: var(--primary);
            color: white;
        }

        .message-content {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 18px;
            position: relative;
            line-height: 1.5;
        }

        .message.zara .message-content {
            background: var(--card-bg);
            border-top-left-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .message.user .message-content {
            background: var(--secondary);
            color: white;
            border-top-right-radius: 5px;
        }

        .message-typing {
            display: flex;
            gap: 5px;
            padding: 15px 20px;
            background: var(--card-bg);
            border-radius: 18px;
            border-top-left-radius: 5px;
            width: fit-content;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--gray);
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        .chat-input-container {
            padding: 20px;
            background: var(--card-bg);
            border-top: 1px solid var(--light);
        }

        .chat-input-wrapper {
            display: flex;
            gap: 12px;
            align-items: end;
        }

        .chat-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid var(--light);
            border-radius: 25px;
            outline: none;
            font-size: 16px;
            background: var(--bg-color);
            color: var(--text-color);
            resize: none;
            min-height: 50px;
            max-height: 120px;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: var(--secondary);
        }

        .send-button {
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .send-button:hover {
            background: var(--primary);
            transform: scale(1.05);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        /* Intelligence Panel */
        .intelligence-panel {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            height: 80vh;
            overflow-y: auto;
        }

        .panel-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .panel-header h2 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 22px;
        }

        .panel-header p {
            color: var(--gray);
            font-size: 14px;
        }

        .intelligence-feature {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary);
        }

        .feature-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .feature-title {
            font-weight: 600;
            color: var(--primary);
        }

        .feature-desc {
            color: var(--gray);
            font-size: 14px;
            line-height: 1.5;
        }

        .context-badge {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            margin-top: 8px;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 1000;
            color: var(--primary);
            font-size: 20px;
        }

        /* Responsive */
        @media (max-width: 968px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .intelligence-panel {
                height: auto;
                max-height: 400px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .chat-container, .intelligence-panel {
                height: auto;
                min-height: 70vh;
            }
            
            .message-content {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </button>

    <div class="container">
        <!-- Chat Interface -->
        <div class="chat-container">
            <div class="chat-header">
                <div class="zara-avatar">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h1>ZaraAI Security Assistant</h1>
                <p>Your Intelligent Cybersecurity Companion</p>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>Enhanced Intelligence Active</span>
                </div>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message zara">
                    <div class="message-avatar">Z</div>
                    <div class="message-content">
                        Hello! I'm ZaraAI, now with enhanced intelligence! I can remember our conversations, provide detailed cybersecurity guidance, and understand context much better. How can I help protect your digital world today?
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea class="chat-input" id="chatInput" placeholder="Ask me about cybersecurity, threats, or security best practices..." rows="1"></textarea>
                    <button class="send-button" id="sendButton">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Intelligence Panel -->
        <div class="intelligence-panel">
            <div class="panel-header">
                <h2>Enhanced Intelligence Systems</h2>
                <p>Active AI Capabilities</p>
            </div>

            <div class="intelligence-feature">
                <div class="feature-header">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="feature-title">Contextual Memory</div>
                </div>
                <div class="feature-desc">
                    Remembers conversation history and maintains context across multiple exchanges. I can build on previous discussions and provide continuous, coherent assistance.
                </div>
                <div class="context-badge">Active: Session Memory</div>
            </div>

            <div class="intelligence-feature">
                <div class="feature-header">
                    <div class="feature-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="feature-title">Cybersecurity Expertise</div>
                </div>
                <div class="feature-desc">
                    Deep knowledge of threats, defenses, compliance frameworks, and security best practices. From basic concepts to advanced enterprise security.
                </div>
                <div class="context-badge">Active: Domain Knowledge</div>
            </div>

            <div class="intelligence-feature">
                <div class="feature-header">
                    <div class="feature-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="feature-title">Intent Recognition</div>
                </div>
                <div class="feature-desc">
                    Understands what you're really asking for, not just keywords. Can distinguish between questions, requests for help, and casual conversation.
                </div>
                <div class="context-badge">Active: Smart Understanding</div>
            </div>

            <div class="intelligence-feature">
                <div class="feature-header">
                    <div class="feature-icon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="feature-title">Personality Engine</div>
                </div>
                <div class="feature-desc">
                    Maintains consistent "angel-guard" personality - helpful, protective, and encouraging. Contextual humor makes security approachable.
                </div>
                <div class="context-badge">Active: Character Consistency</div>
            </div>

            <div class="intelligence-feature">
                <div class="feature-header">
                    <div class="feature-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="feature-title">Emotional Intelligence</div>
                </div>
                <div class="feature-desc">
                    Recognizes user frustration, celebrates progress, and provides motivational support. Makes cybersecurity learning engaging and positive.
                </div>
                <div class="context-badge">Active: Empathic Responses</div>
            </div>

            <div class="intelligence-feature">
                <div class="feature-header">
                    <div class="feature-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div class="feature-title">Proactive Assistance</div>
                </div>
                <div class="feature-desc">
                    Anticipates needs based on conversation patterns and provides helpful suggestions before you even ask.
                </div>
                <div class="context-badge">Active: Smart Suggestions</div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced ZaraAI Intelligence System
        class ZaraAIIntelligence {
            constructor() {
                this.conversationHistory = [];
                this.userContext = {
                    knowledgeLevel: 'beginner',
                    interests: [],
                    currentTopic: null,
                    emotionalState: 'neutral'
                };
                this.cybersecurityKnowledge = this.initializeKnowledgeBase();
            }

            initializeKnowledgeBase() {
                return {
                    // Core Cybersecurity Concepts
                    fundamentals: {
                        'cybersecurity': 'Cybersecurity is the practice of protecting systems, networks, and programs from digital attacks. These attacks typically aim to access, change, or destroy sensitive information, extort money, or interrupt normal business processes.',
                        'firewall': 'A firewall is a network security system that monitors and controls incoming and outgoing network traffic based on predetermined security rules. It acts as a barrier between a trusted network and an untrusted network.',
                        'encryption': 'Encryption is the process of converting information or data into a code to prevent unauthorized access. It uses algorithms to transform readable data (plaintext) into unreadable data (ciphertext).',
                        'malware': 'Malware (malicious software) is any software intentionally designed to cause damage to a computer, server, client, or computer network. Types include viruses, worms, Trojan horses, ransomware, and spyware.',
                        'phishing': 'Phishing is a cyber attack that uses disguised email as a weapon. The goal is to trick the email recipient into believing that the message is something they want or need and to click a link or download an attachment.'
                    },
                    
                    // Advanced Topics
                    advanced: {
                        'zero trust': 'Zero Trust is a security framework requiring all users, whether in or outside the organization\'s network, to be authenticated, authorized, and continuously validated for security configuration and posture before being granted or keeping access to applications and data.',
                        'siem': 'SIEM (Security Information and Event Management) solutions provide real-time analysis of security alerts generated by applications and network hardware. They help security teams identify and respond to threats quickly.',
                        'soc': 'A SOC (Security Operations Center) is a centralized unit that deals with security issues on an organizational and technical level. It includes the people, processes, and technology for monitoring and protecting the organization.',
                        'penetration testing': 'Penetration testing (pen testing) is an authorized simulated attack on a computer system, performed to evaluate the security of the system. The test is performed to identify weaknesses.',
                        'incident response': 'Incident response is an organized approach to addressing and managing the aftermath of a security breach or cyber attack. The goal is to handle the situation in a way that limits damage and reduces recovery time and costs.'
                    },
                    
                    // Compliance & Standards
                    compliance: {
                        'gdpr': 'GDPR (General Data Protection Regulation) is a regulation in EU law on data protection and privacy in the European Union and the European Economic Area. It also addresses the transfer of personal data outside the EU and EEA areas.',
                        'hipaa': 'HIPAA (Health Insurance Portability and Accountability Act) is a US law designed to provide privacy standards to protect patients\' medical records and other health information.',
                        'pci dss': 'PCI DSS (Payment Card Industry Data Security Standard) is a set of security standards designed to ensure that all companies that accept, process, store or transmit credit card information maintain a secure environment.',
                        'nist': 'NIST (National Institute of Standards and Technology) Cybersecurity Framework provides a policy framework of computer security guidance for how private sector organizations can assess and improve their ability to prevent, detect, and respond to cyber attacks.',
                        'iso 27001': 'ISO 27001 is an international standard for managing information security. It provides a framework for establishing, implementing, maintaining, and continually improving an information security management system.'
                    }
                };
            }

            // Enhanced Intent Recognition
            recognizeIntent(message) {
                const lowerMessage = message.toLowerCase();
                
                // Question patterns
                if (lowerMessage.includes('what is') || lowerMessage.includes('what are') || 
                    lowerMessage.includes('explain') || lowerMessage.includes('define')) {
                    return 'definition_request';
                }
                
                // Help requests
                if (lowerMessage.includes('help') || lowerMessage.includes('how to') || 
                    lowerMessage.includes('guide') || lowerMessage.includes('tutorial')) {
                    return 'help_request';
                }
                
                // Threat-related
                if (lowerMessage.includes('threat') || lowerMessage.includes('attack') || 
                    lowerMessage.includes('vulnerability') || lowerMessage.includes('risk')) {
                    return 'threat_analysis';
                }
                
                // Best practices
                if (lowerMessage.includes('best practice') || lowerMessage.includes('should i') || 
                    lowerMessage.includes('recommend') || lowerMessage.includes('advice')) {
                    return 'best_practice';
                }
                
                // Casual conversation
                if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || 
                    lowerMessage.includes('hey') || lowerMessage.startsWith('how are')) {
                    return 'casual_greeting';
                }
                
                return 'general_inquiry';
            }

            // Contextual Memory Management
            updateConversationHistory(role, message) {
                this.conversationHistory.push({
                    role,
                    message,
                    timestamp: new Date().toISOString(),
                    intent: role === 'user' ? this.recognizeIntent(message) : null
                });
                
                // Keep only last 20 messages to manage memory
                if (this.conversationHistory.length > 20) {
                    this.conversationHistory = this.conversationHistory.slice(-20);
                }
                
                this.updateUserContext();
            }

            updateUserContext() {
                const recentMessages = this.conversationHistory.slice(-5);
                
                // Detect current topic
                const topics = ['cybersecurity', 'firewall', 'encryption', 'malware', 'phishing', 
                               'compliance', 'gdpr', 'hipaa', 'training', 'incident'];
                
                for (const msg of recentMessages) {
                    const lowerMsg = msg.message.toLowerCase();
                    for (const topic of topics) {
                        if (lowerMsg.includes(topic)) {
                            this.userContext.currentTopic = topic;
                            break;
                        }
                    }
                    if (this.userContext.currentTopic) break;
                }
                
                // Detect emotional state based on message content
                const lastUserMessage = recentMessages.filter(m => m.role === 'user').pop();
                if (lastUserMessage) {
                    const msg = lastUserMessage.message.toLowerCase();
                    if (msg.includes('frustrat') || msg.includes('annoy') || msg.includes('difficult')) {
                        this.userContext.emotionalState = 'frustrated';
                    } else if (msg.includes('thank') || msg.includes('great') || msg.includes('helpful')) {
                        this.userContext.emotionalState = 'positive';
                    } else if (msg.includes('urgent') || msg.includes('emergency') || msg.includes('help!')) {
                        this.userContext.emotionalState = 'stressed';
                    } else {
                        this.userContext.emotionalState = 'neutral';
                    }
                }
            }

            // Knowledge Retrieval with Context
            getKnowledgeResponse(intent, message) {
                const lowerMessage = message.toLowerCase();
                
                // Search through knowledge base
                for (const category in this.cybersecurityKnowledge) {
                    for (const term in this.cybersecurityKnowledge[category]) {
                        if (lowerMessage.includes(term)) {
                            let response = this.cybersecurityKnowledge[category][term];
                            
                            // Add contextual humor based on emotional state
                            if (this.userContext.emotionalState === 'frustrated') {
                                response += "\n\nDon't worry, even the most secure systems need regular checkups! You're doing great by asking these questions. ðŸ›¡ï¸";
                            } else if (this.userContext.emotionalState === 'positive') {
                                response += "\n\nGlad I could help! Your proactive approach to security is what makes systems truly resilient. ðŸŒŸ";
                            } else {
                                // Add light contextual humor
                                const humor = [
                                    "\n\nRemember: in cybersecurity, being paranoid is just being prepared! ðŸ˜„",
                                    "\n\nThink of security like an onion - it has layers, and they might make you cry, but they protect what's important! ðŸ§…",
                                    "\n\nThis security stuff can be complex, but you're asking the right questions! ðŸ’ª"
                                ];
                                response += humor[Math.floor(Math.random() * humor.length)];
                            }
                            
                            return response;
                        }
                    }
                }
                
                return null;
            }

            // Enhanced Response Generation
            generateResponse(userMessage) {
                const intent = this.recognizeIntent(userMessage);
                const knowledgeResponse = this.getKnowledgeResponse(intent, userMessage);
                
                if (knowledgeResponse) {
                    return knowledgeResponse;
                }
                
                // Contextual responses based on intent and history
                switch (intent) {
                    case 'casual_greeting':
                        const greetings = [
                            "Hello! Ready to dive into some cybersecurity topics? I'm here to help! ðŸ›¡ï¸",
                            "Hi there! I'm ZaraAI, your security companion. What security questions can I help with today?",
                            "Greetings! I see you're interested in security - excellent choice! How can I assist you?"
                        ];
                        return greetings[Math.floor(Math.random() * greetings.length)];
                        
                    case 'help_request':
                        return "I'd be happy to help! Could you tell me more about what specific security challenge you're facing? Whether it's setting up protections, understanding threats, or compliance questions, I'm here to guide you. ðŸ”";
                        
                    case 'threat_analysis':
                        return "When analyzing threats, it's important to consider both prevention and detection. Common threats include malware, phishing, and insider threats. Would you like me to focus on a specific type of threat or provide general protection strategies? ðŸš¨";
                        
                    case 'best_practice':
                        return "Excellent question! Cybersecurity best practices include: using strong unique passwords, enabling multi-factor authentication, keeping software updated, regular backups, and security awareness training. Which area would you like to explore further? ðŸ“š";
                        
                    default:
                        const defaultResponses = [
                            "That's an interesting question about cybersecurity! While I specialize in security topics, I'd be happy to discuss how this relates to protecting systems and data. Could you provide more context?",
                            "I'm designed to help with cybersecurity and protection strategies. Could you rephrase your question in the context of digital security, threats, or defense mechanisms?",
                            "As your security companion, I focus on cybersecurity topics. I can help with threat analysis, security best practices, compliance questions, or general security guidance. What specific area interests you? ðŸ›¡ï¸"
                        ];
                        return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
                }
            }

            // Process user message and return AI response
            processMessage(userMessage) {
                // Update conversation history
                this.updateConversationHistory('user', userMessage);
                
                // Generate intelligent response
                const response = this.generateResponse(userMessage);
                
                // Update conversation history with AI response
                this.updateConversationHistory('assistant', response);
                
                return response;
            }
        }

        // Initialize enhanced ZaraAI
        const zaraAI = new ZaraAIIntelligence();

        // DOM Elements
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const themeToggle = document.getElementById('themeToggle');

        // Auto-resize textarea
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });

        // Send message function
        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            // Add user message to chat
            addMessage(message, 'user');
            chatInput.value = '';
            chatInput.style.height = 'auto';

            // Show typing indicator
            const typingIndicator = showTypingIndicator();

            // Process with ZaraAI (simulate thinking delay)
            setTimeout(() => {
                removeTypingIndicator(typingIndicator);
                const response = zaraAI.processMessage(message);
                addMessage(response, 'zara');
            }, 1000 + Math.random() * 1000); // Realistic response delay
        }

        // Add message to chat
        function addMessage(content, role) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'message-avatar';
            avatarDiv.textContent = role === 'user' ? 'Y' : 'Z';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = content;
            
            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Show typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message zara';
            typingDiv.id = 'typing-indicator';
            
            const avatarDiv = document.createElement('div');
            avatarDiv.className = 'message-avatar';
            avatarDiv.textContent = 'Z';
            
            const typingContent = document.createElement('div');
            typingContent.className = 'message-typing';
            
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.className = 'typing-dot';
                typingContent.appendChild(dot);
            }
            
            typingDiv.appendChild(avatarDiv);
            typingDiv.appendChild(typingContent);
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return typingDiv;
        }

        // Remove typing indicator
        function removeTypingIndicator(typingElement) {
            if (typingElement && typingElement.parentNode) {
                typingElement.parentNode.removeChild(typingElement);
            }
        }

        // Event listeners
        sendButton.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Theme toggle
        themeToggle.addEventListener('click', function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            if (currentTheme === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                this.innerHTML = '<i class="fas fa-moon"></i>';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                this.innerHTML = '<i class="fas fa-sun"></i>';
            }
        });

        // Sample conversation starter
        setTimeout(() => {
            const starterMessage = "Try asking me about cybersecurity concepts like 'What is a firewall?' or 'Explain phishing attacks' - I now understand context and can provide detailed, helpful answers!";
            addMessage(starterMessage, 'zara');
        }, 2000);
    </script>
</body>
</html>
